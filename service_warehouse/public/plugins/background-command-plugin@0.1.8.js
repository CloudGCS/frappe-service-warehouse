/*! For license information please see background-command-plugin@0.1.7-staging.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define([,],t):"object"==typeof exports?exports["background-command-plugin"]=t(require("react"),require("react-dom")):e["background-command-plugin"]=t(e.React,e.ReactDOM)}(self,((e,t)=>(()=>{"use strict";var n={827:(e,t,n)=>{var i,o,a,r,l,s,u,d,c,p,f,y,g,m,S,v,h,b;n.r(t),n.d(t,{AircraftHealthEnum:()=>f,CommandEnum:()=>i,CommandSourceEnum:()=>o,CommandTypeEnum:()=>v,FailSafeTypeEnum:()=>b,GPSCorrectionStatusEnum:()=>a,GPSFixStatusEnum:()=>l,HandOverCommandType:()=>g,IndicatorStatusEnum:()=>S,LogLevel:()=>m,PayloadRetractStatusEnum:()=>s,PilotageStateEnum:()=>y,SensorStatus:()=>h,TravelStatusEnum:()=>u,UnitSystemEnum:()=>d,UnitTypeEnum:()=>r,UserTypeEnum:()=>p,WarningStatusEnum:()=>c}),function(e){e.None="None",e.Manual="Manual",e.ReturnToLaunch="ReturnToLaunch",e.Stabilize="Stabilize",e.FlyByWireA="FlyByWireA",e.FlyByWireB="FlyByWireB",e.FlyByGCS="FlyByGCS",e.Circle="Circle",e.WayPoint="WayPoint",e.LoiterUnlimited="LoiterUnlimited",e.LoiterTurns="LoiterTurns",e.LoiterTime="LoiterTime",e.LoiterAltitude="LoiterAltitude",e.ApproachLanding="ApproachLanding",e.Land="Land",e.TakeOff="TakeOff",e.TaxiStop="TaxiStop",e.TaxiToPoint="TaxiToPoint",e.TaxiSpeedUp="TaxiSpeedUp",e.SetServoAngle="SetServoAngle",e.Sit="Sit",e.SetFlightParam="SetFlightParam",e.Rescue="Rescue",e.Jump="Jump",e.VtolStabilize="VtolStabilize",e.VtolHoverByWire="VtolHoverByWire",e.VtolSpeedHold="VtolSpeedHold",e.VtolPositionHold="VtolPositionHold",e.VtolSpeedUp="VtolSpeedUp",e.VtolTakeOff="VtolTakeOff",e.VtolLand="VtolLand",e.VtolHoverTime="VtolHoverTime",e.RequestDeviceAction="RequestDeviceAction",e.Launch="Launch",e.ChuteLand="ChuteLand",e.VtolTest="VtolTest"}(i||(i={})),function(e){e.None="None",e.Initial="Initial",e.Mission="Mission",e.Idle="Idle",e.RC="RC",e.Instant="Instant",e.Geofence="Geofence",e.Failsafe="Failsafe",e.FailsafeFlightCmdOnGround="FailsafeFlightCmdOnGround",e.FailsafeRescue="FailsafeRescue",e.FailsafeGPSLoss="FailsafeGPSLoss",e.FailsafeGCSLoss="FailsafeGCSLoss",e.FailsafeRCLoss="FailsafeRCLoss"}(o||(o={})),function(e){e.Standard="Standard",e.SBAS="SBAS",e.DGPS="DGPS",e.RTK="RTK"}(a||(a={})),function(e){e.None="None",e.Distance="Distance",e.ShortDistance="ShortDistance",e.LongDistance="LongDistance",e.Altitude="Altitude",e.HorizontalSpeed="HorizontalSpeed",e.VerticalSpeed="VerticalSpeed",e.WindSpeed="WindSpeed",e.TimePrecise="TimePrecise",e.LatLon="LatLon",e.Weigh="Weigh",e.Volume="Volume",e.Temperature="Temperature"}(r||(r={})),function(e){e.NoGPS="NoGPS",e.NoValidPackets="NoValidPackets",e.NoFix="NoFix",e.OK="OK"}(l||(l={})),function(e){e.RetractDisabled="RetractDisabled",e.RetractInitialized="RetractInitialized",e.RetractFailed="RetractFailed",e.LidClosed="LidClosed",e.LidOpen="LidOpen",e.Deployed="Deployed",e.Deploying="Deploying",e.Retracting="Retracting",e.OpeningLid="OpeningLid",e.ClosingLid="ClosingLid"}(s||(s={})),function(e){e.SittingOnGround="SittingOnGround",e.MovingOnGround="MovingOnGround",e.Flying="Flying",e.Hovering="Hovering"}(u||(u={})),function(e){e[e.SI=1]="SI",e[e.US=2]="US"}(d||(d={})),function(e){e.Hidden="Hidden",e.Disabled="Disabled",e.Failed="Failed",e.Unhealthy="Unhealthy",e.Healthy="Healthy"}(c||(c={})),function(e){e.Pilot="Pilot",e.Observer="Observer"}(p||(p={})),function(e){e.Start="Start",e.Healthy="Healthy",e.Unhealthy="Unhealthy",e.Unattended="Unattended",e.DownLinkBroken="DownLinkBroken",e.Other="Other"}(f||(f={})),function(e){e.None="None",e.Observing="Observing",e.Controlling="Controlling"}(y||(y={})),function(e){e.Request="Request",e.Offer="Offer",e.Message="Message"}(g||(g={})),function(e){e.Message="Message",e.Info="Info",e.Warning="Warning",e.Error="Error"}(m||(m={})),function(e){e.None="None",e.Disabled="Disabled",e.Failed="Failed",e.Unhealthy="Unhealthy",e.Healthy="Healthy"}(S||(S={})),function(e){e.Jump="Jump",e.DownloadMission="DownloadMission",e.UploadMission="UploadMission",e.StartMission="StartMission",e.MissionGeofenceUpdate="MissionGeofenceUpdate",e.Logout="Logout",e.FAST_ReturnToLaunch="FastReturnToLaunch",e.FAST_TakeOff="FastTakeOff",e.FAST_VTOLSpeedHold="FastVTOLSpeedHold",e.FAST_FlyByFireA="FastFlyByFireA",e.FAST_FlyByFireB="FastFlyByFireB",e.FAST_Sit="FastSit",e.FAST_Manual="FastManual",e.FAST_Land="FastLand",e.FAST_AbortLanding="FastAbortLanding",e.FAST_Loiter="FastLoiter",e.HandOver="HandOver",e.HeartBeat="HeartBeat",e.Claim="Claim",e.Plugin="Plugin",e.Acknowledgement="Acknowledgement",e.HandOverInit="HandOverInit",e.HandOverResponse="HandOverResponse",e.HandOverMessage="HandOverMessage",e.DeployParachute="DeployParachute",e.InstantLoiter="InstantLoiter"}(v||(v={})),function(e){e.NoSensor="NoSensor",e.Disabled="Disabled",e.Failed="Failed",e.Unhealthy="Unhealthy",e.Healthy="Healthy"}(h||(h={})),function(e){e.ReturnToLaunch="ReturnToLaunch",e.Jump="Jump"}(b||(b={}))},745:(e,t,n)=>{var i=n(238);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},251:(e,t,n)=>{var i=n(868),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,a={},u=null,d=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,i)&&!s.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:o,type:e,key:u,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},893:(e,t,n)=>{e.exports=n(251)},527:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{s(i.next(e))}catch(e){a(e)}}function l(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ComandPlugin=void 0;var r=n(893),l=n(868),s=n(827);n(147),t.ComandPlugin=function(e){var t=e.pluginApi,n=(0,l.useState)({aircraftId:""}),u=n[0],d=n[1],c=(0,l.useState)(),p=c[0],f=c[1],y=(0,l.useState)(!1),g=y[0],m=y[1];return(0,l.useEffect)((function(){if(u){var e=t.systemApi.aircraftApi.isBeingControlled(u);m(e)}}),[u]),(0,l.useEffect)((function(){var e=setInterval((function(){var e=t.systemApi.selectedAircraftApi.getAircraftIdentifier();e&&d(i(i({},e),{id:(new Date).getTime()}))}),1e3);return function(){clearInterval(e)}}),[]),(0,l.useEffect)((function(){p&&(g?p.addItemsMiddleContextMenu([{title:"Loiter here",handler:function(e){var n,i=e.coordinates,o=(e.target,e.targetIndex,t.systemApi.selectedAircraftApi.getTelemetry());o&&t.systemApi.selectedAircraftApi.executeCommand(s.CommandTypeEnum.InstantLoiter,{latitude:null==i?void 0:i.latitude,longitude:null==i?void 0:i.longitude,altitude:null===(n=o.gpsInfo)||void 0===n?void 0:n.coordinates.altitude})}}]):p.removeItemsMiddleContextMenu([{title:"Loiter here",handler:function(e){e.coordinates,e.target,e.targetIndex}}]))}),[g,p]),(0,l.useEffect)((function(){o(void 0,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,t.pluginServiceManager.getServiceAsync({serviceName:"entityService",pluginName:"map-plugin"})];case 1:return(e=n.sent().service)&&f(e),[2]}}))}))}),[]),(0,r.jsx)(r.Fragment,{})}},868:t=>{t.exports=e},238:e=>{e.exports=t},147:e=>{e.exports=JSON.parse('{"name":"background-command-plugin","libraryName":"Background Command Plugin","version":"0.1.7-staging","config":{},"scripts":{"main-build":"npx webpack  --mode production --env ENV=production ","staging-build":"npx webpack  --mode production --env ENV=production ","development-build":"npx webpack --mode development  --env  ENV=development","local-build":"npx webpack  --mode development   --env  ENV=local  && xcopy /E /I /Y .\\\\build\\\\ ..\\\\plugins\\\\"},"dependencies":{"@qandq/cloud-gcs-core":"^1.2.21","@qandq/plugin-grid-system":"^0.0.1","antd":"5.4.2","querystring-es3":"^0.2.1","react":"18.2.0","react-dom":"18.2.0","style-loader":"^3.3.1"},"devDependencies":{"@types/jest":"^28.1.1","css-loader":"^6.7.1","dotenv-webpack":"^7.1.1","ts-jest":"^28.0.4","ts-loader":"^9.3.0","typescript":"^4.7.3","webpack":"^5.73.0","webpack-cli":"^4.9.2"}}')}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return n[e].call(a.exports,a,a.exports,o),a.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{var e=a;Object.defineProperty(e,"__esModule",{value:!0}),e.getAttributes=void 0;var t=o(893),n=o(147),i=o(745),r=o(527);e.getAttributes=function(){return{name:n.name,libraryName:n.libraryName,version:n.version,config:n.config}};var l=function(){function e(e){this.PluginApi=e}return e.prototype.init=function(){(0,i.createRoot)(this.PluginApi.pluginUIManager.getRootElement()).render((0,t.jsx)(r.ComandPlugin,{pluginApi:this.PluginApi}))},e}();e.default=l})(),a})()));